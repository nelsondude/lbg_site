{% extends "base.html" %}

{% load wagtailcore_tags wagtailimages_tags static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'home/css/home_page.css' %}">
  <link rel="stylesheet" href="{% static 'home/css/social.css' %}">
{% endblock extra_css %}

{% block content %}
  <div id="landing">
    <div class="landing-content">
      <img src="{% static 'images/lbg_logo_black.png' %}" class="mx-auto d-block" alt="">
      <br>
      <div class="announcements">
        Announcements |
      <div>
        <div class="animated_messages">
        {% if current_announcements %}
          {% for ann in current_announcements %}
          <div>&nbsp;{{ ann.announcement }}</div>
          {% endfor %}
        {% else %}
          <div>&nbsp;No current messages</div>
        {% endif %}
        </div>
      </div>
      </div>
    </div>
  </div>
  <div id="about">
    <div class="background-svg left">
      <img src="{% static 'home/images/left.svg' %}">
      <h3>ABOUT</h3>
    </div>
    <div class="container" id="about-content">
      {{ page.about_content|richtext }}
    </div>
  </div>
  <div id="samples">
    <div class="background-svg right">
      <img src="{% static 'home/images/right.svg' %}">
      <h3>Samples</h3>
    </div>
    <div class="gallery" id="image-gallery">

      <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          {% for _ in page.gallery_images.all %}
            <li data-target="#carouselExampleIndicators" data-slide-to="{{ forloop.counter0 }}" class="active"></li>
          {% endfor %}
        </ol>
        <div class="carousel-inner">
          {% for item in page.gallery_images.all %}
            <div class="carousel-item {% if forloop.counter0 == 0 %}active{% endif %}" style="text-align: center;">
              {% image item.image fill-320x240 %}
            </div>
          {% endfor %}
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    </div>

  </div>
  <div id="vendors">
    <div class="background-svg left">
      <img src="{% static 'home/images/left.svg' %}">
      <h3>vendors</h3>
    </div>

  </div>
  <div id="designlab">
    <div class="background-svg right">
      <img src="{% static 'home/images/right.svg' %}">
      <h3>Design Lab</h3>
    </div>
    <img src="http://www.layoutlab.com/images/welcome/logo.png" alt="">
  </div>

  <div id="payment">
    <div class="background-svg left">
      <img src="{% static 'home/images/left.svg' %}">
      <h3>payments</h3>
    </div>

  </div>
  <div id="pricing">
    <div class="background-svg right">
      <img src="{% static 'home/images/right.svg' %}">
      <h3>pricing</h3>
    </div>
    <div class="container">
      {% for section in page.pricing_sections.all %}
        <h1>{{ section.pricing_title }}</h1>
        <p>{{ section.caption }}</p>
        {{ section.body }}
        <br>
        <hr>
      {% endfor %}
    </div>
  </div>

  <footer id="contact">
    <div id="lbg_map">
      <div id="map"></div>

    </div>
    <div id="lbg_contact">
      <img src="{% static 'images/lbg_logo.png' %}" class="mx-auto d-block" alt="">
      {% if page.address %}<div>{{ page.address }}</div>{% endif %}
      {% if page.phone %}<a href="tel:{{ page.phone }}">{{ page.phone }}</a>{% endif %}
      {% if page.email %}<a href="mailto:{{ page.email }}">{{ page.email }}</a>{% endif %}

      <hr>
      <h3>Hours</h3>
      {{ page.hours }}
    </div>
  </footer>

  <div class="icon-bar">
    <a href="https://www.facebook.com/lbgraphix/" class="facebook" target="_blank"><i class="fa fa-facebook"></i></a>
    <a href="https://www.instagram.com/longbeachgraphix/?hl=en" class="instagram" target="_blank"><i class="fa fa-instagram"></i></a>
    <a href="https://www.linkedin.com/company/long-beach-graphix/" class="linkedin" target="_blank"><i class="fa fa-linkedin"></i></a>
  </div>


{% endblock %}

{% block extra_js %}
  <script>
    var map;

    function initMap() {
      lbg = {lat: 33.772, lng: -118.14};
      map = new google.maps.Map(document.getElementById('map'), {
        center: lbg,
        zoom: 12
      });
      marker = new google.maps.Marker({position: lbg, map: map});
    }
  </script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAMvk812wM6ed4uybW8Zhdhq5Jz9Q0f_tM&callback=initMap"
          async defer></script>

  <script>
    var height = $('.animated_messages').height();
    var num_children = $('.animated_messages > *').length;
    var count = 0;

    setInterval(
      function () {
        $('.animated_messages').css('transform', 'translateY(-' + (height / num_children) * (count % num_children) + 'px)');
        count += 1;
      }, 3000
    );
  </script>
{% endblock extra_js %}